#          SOF  EOF   if   >   THEN :=    +    /    ;    *    =  write  (    )   id  const
matrix = [[" ", " ", "<", " ", "<", "<", " ", " ", "<", " ", " ", "<", " ", " ", "<", " "],  # SOf
          [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "],  # EOF
          [" ", ">", " ", " ", "=", " ", " ", " ", " ", " ", " ", " ", " ", " ", "<", " "],  # if 1
          [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "=", "="],  # > 2
          [" ", ">", "<", " ", " ", " ", " ", " ", ">", " ", " ", "<", " ", " ", "<", " "],  # THEN 3
          [" ", ">", " ", " ", " ", " ", "<", "<", ">", "<", " ", " ", " ", " ", "<", "<"],  # := 4
          [" ", ">", " ", " ", " ", " ", " ", "<", ">", "<", " ", " ", " ", " ", "<", "<"],  # + 5
          [" ", ">", " ", " ", " ", " ", ">", " ", ">", " ", " ", " ", " ", " ", "<", "<"],  # / 6
          [" ", ">", "<", " ", " ", " ", " ", " ", "=", " ", " ", " ", " ", " ", "<", " "],  # ; 7
          [" ", ">", " ", " ", " ", " ", ">", " ", " ", " ", " ", " ", " ", " ", "<", "<"],  # * 8
          [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "=", "="],  # = 9
          [" ", ">", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "=", " ", " ", " "],  # write 10
          [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "=", "<", "<"],  # ( 11
          [" ", ">", " ", " ", " ", " ", " ", " ", ">", " ", " ", " ", " ", " ", " ", " "],  # ) 12
          [" ", ">", ">", "=", ">", "=", ">", ">", ">", ">", "=", " ", " ", ">", " ", " "],  # id 13
          [" ", " ", " ", "=", ">", " ", ">", ">", ">", ">", "=", " ", " ", "=", " ", " "]]  # const 14

data = [
    "SOF",
    "if", "N", ">", "0", "THEN",
    "M", ":=", "M", "+", "1", "/", "N", ";",
    "B", ":=", "M", "*", "N", "+", "3", ";",
    "if", "B", "=", "0", "THEN", "write", "(", "N", ")",
    "EOF"
]

res = {
    "SOF": 0,
    "EOF": 1,
    "if": 2,
    ">": 3,
    "THEN": 4,
    ":=": 5,
    "+": 6,
    "/": 7,
    ";": 8,
    "*": 9,
    "=": 10,
    "write": 11,
    "(": 12,
    ")": 13,
    "N": 14,
    "M": 14,
    "B": 14,
    "0": 15,
    "1": 15,
    "3": 15
}

while len(data) > 2:
    index = 0

    while matrix[res[data[index]]][res[data[index + 1]]] != ">":
        index += 1
    r = index

    while matrix[res[data[index - 1]]][res[data[index]]] != "<":
        index -= 1
    l = index

    temp = []
    out = []

    for i in range(len(data)):
        if l <= i <= r:
            out.append(data[i])
        else:
            temp.append(data[i])

    print(" ".join(out))
    data = temp
